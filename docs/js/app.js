(function(e){function t(t){for(var r,o,l=t[0],u=t[1],s=t[2],d=0,f=[];d<l.length;d++)o=l[d],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&f.push(a[o][0]),a[o]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);c&&c(t);while(f.length)f.shift()();return i.push.apply(i,s||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,l=1;l<n.length;l++){var u=n[l];0!==a[u]&&(r=!1)}r&&(i.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},a={app:0},i=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/gif_demo/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=t,l=l.slice();for(var s=0;s<l.length;s++)t(l[s]);var c=u;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var r=n("85ec"),a=n.n(r);a.a},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("h2",[e._v("自制解压神器&文档助手")]),n("video-to-gif"),n("hr"),n("imgs-to-gif"),n("hr"),n("gif-to-imgs")],1)},i=[],o=(n("66b9"),n("b650")),l=(n("e7e5"),n("d399")),u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h2",[e._v("上传或粘贴图片")]),n("field",{attrs:{name:"uploader",label:""},scopedSlots:e._u([{key:"input",fn:function(){return[n("uploader",{ref:"imgs",model:{value:e.uploader,callback:function(t){e.uploader=t},expression:"uploader"}})]},proxy:!0}])}),n("h2",[e._v("设置gif尺寸")]),e._v(" 宽度："),n("input",{directives:[{name:"model",rawName:"v-model",value:e.width,expression:"width"}],staticClass:"input",attrs:{type:"number"},domProps:{value:e.width},on:{input:function(t){t.target.composing||(e.width=t.target.value)}}}),e._v(" 高度："),n("input",{directives:[{name:"model",rawName:"v-model",value:e.height,expression:"height"}],staticClass:"input",attrs:{type:"number"},domProps:{value:e.height},on:{input:function(t){t.target.composing||(e.height=t.target.value)}}}),n("br"),e._v(" 帧延时(ms)："),n("input",{directives:[{name:"model",rawName:"v-model",value:e.delay,expression:"delay"}],staticClass:"input",attrs:{type:"number"},domProps:{value:e.delay},on:{input:function(t){t.target.composing||(e.delay=t.target.value)}}}),n("br"),e._v(" 质量(1~30以内数字)："),n("input",{directives:[{name:"model",rawName:"v-model",value:e.quality,expression:"quality"}],staticClass:"input",attrs:{type:"number"},domProps:{value:e.quality},on:{input:function(t){t.target.composing||(e.quality=t.target.value)}}}),n("br"),n("br"),n("van-button",{attrs:{type:"primary",size:"small"},on:{click:e.toPreview}},[e._v("预览")]),e._v(" "),n("van-button",{attrs:{type:"primary",size:"small"},on:{click:e.toDownload}},[e._v("下载")]),n("br"),n("br"),n("img",{directives:[{name:"show",rawName:"v-show",value:e.gifImg,expression:"gifImg"}],attrs:{src:e.gifImg,alt:""}}),n("br"),n("br")],1)},s=[],c=(n("c740"),n("d81d"),n("d3b7"),n("3ca3"),n("2ca0"),n("ddb0"),n("2b3d"),n("96cf"),n("1da1")),d=(n("e930"),n("8f80")),f=(n("be7f"),n("565f")),p=n("cd40"),h=n.n(p),g={components:{Field:f["a"],Uploader:d["a"]},data:function(){return{uploader:[],gifImg:"",width:0,height:0,delay:500,quality:10}},methods:{toPreview:function(){this.createGif(this.uploader.map((function(e){return e.content})))},toDownload:function(){this.createGif(this.uploader.map((function(e){return e.content})),!0)},createGif:function(e){var t=arguments,n=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){var a,i,o,l,u;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(a=t.length>1&&void 0!==t[1]&&t[1],n.uploader.length){r.next=3;break}return r.abrupt("return",n.$toast("请上传图片"));case 3:if(!(n.uploader.length<2)){r.next=5;break}return r.abrupt("return",n.$toast("至少需要上传两张图片"));case 5:i=new h.a({workers:2,quality:+n.quality,workerScript:"./static/gifjs/gif.worker.js"}),i.on("finished",(function(e){if(n.gifImg=URL.createObjectURL(e),a){var t=document.createElement("a");t.setAttribute("download","img"),t.setAttribute("href",n.gifImg),t.click()}})),o=document.createElement("canvas"),l=o.getContext("2d"),u=0;case 10:if(!(u<e.length)){r.next=19;break}return o.width=+n.width,o.height=+n.height,o.delay=+n.delay,r.next=16,n.loadImg({gif:i,canvas:o,ctx:l,img:e[u]});case 16:u++,r.next=10;break;case 19:i.render();case 20:case"end":return r.stop()}}),r)})))()},loadImg:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:config,t=e.gif,n=e.canvas,r=e.ctx,a=e.img;return new Promise((function(e){var i=new Image;i.src=a,r.fillRect(0,0,n.width,n.height),i.onload=function(a){r.drawImage(i,0,0,n.width,n.height),t.addFrame(n,{copy:!0,delay:n.delay}),e()}}))},setDefaultSize:function(){var e=this,t=document.createElement("img");t.setAttribute("src",this.uploader[0].content),t.setAttribute("style","opacity: 0.01;"),document.body.append(t),setTimeout((function(){var n=t.getBoundingClientRect();e.width=n.width,e.height=n.height,document.body.removeChild(t)}),50)}},watch:{uploader:function(e,t){1!==e.length||t.length||this.setDefaultSize()}},mounted:function(){var e=this;document.addEventListener("paste",(function(t){if(t.clipboardData||t.originalEvent){var n=t.clipboardData||t.originalEvent.clipboardData;if(!n.items)return;for(var r=[],a=0;a<n.items.length;a++)r.push(n.items[a]);var i=r.findIndex((function(e){return e.type.startsWith("image")}));r.findIndex((function(e){return e.type.startsWith("video")}));if(-1!==i){var o=n.items[i].getAsFile(),l=new FileReader;l.onload=function(t){var r=t.target.result;e.uploader.push({file:n.files[i],content:r,message:"",status:""}),1===e.uploader.length&&e.setDefaultSize()},l.readAsDataURL(o)}}}))}},v=g,m=n("2877"),y=Object(m["a"])(v,u,s,!1,null,null,null),w=y.exports,_=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h2",[e._v("视频转Gif")]),n("label",{attrs:{for:"fileinp"}},[n("van-button",{attrs:{type:"primary",size:"small"}},[e._v("选择视频")]),n("span",[e._v(" 请选择或粘贴视频文件")]),n("input",{attrs:{type:"file",id:"fileinp",accept:"video/*"},on:{change:e.uploaderVideo}})],1),n("br"),e._v(" "),n("br"),n("video",{directives:[{name:"show",rawName:"v-show",value:e.videoUrl,expression:"videoUrl"}],ref:"video",staticClass:"video",attrs:{controls:"true",src:e.videoUrl},on:{play:e.play,pause:e.pause}}),n("br"),e._v(" 宽度："),n("input",{directives:[{name:"model",rawName:"v-model",value:e.width,expression:"width"}],staticClass:"input",attrs:{type:"number"},domProps:{value:e.width},on:{input:function(t){t.target.composing||(e.width=t.target.value)}}}),e._v(" 高度："),n("input",{directives:[{name:"model",rawName:"v-model",value:e.height,expression:"height"}],staticClass:"input",attrs:{type:"number"},domProps:{value:e.height},on:{input:function(t){t.target.composing||(e.height=t.target.value)}}}),n("br"),e._v(" 帧延时(ms)："),n("input",{directives:[{name:"model",rawName:"v-model",value:e.delay,expression:"delay"}],staticClass:"input",attrs:{type:"number"},domProps:{value:e.delay},on:{input:function(t){t.target.composing||(e.delay=t.target.value)}}}),n("br"),e._v(" 质量(1~30以内数字,越低越清楚)："),n("input",{directives:[{name:"model",rawName:"v-model",value:e.quality,expression:"quality"}],staticClass:"input",attrs:{type:"number"},domProps:{value:e.quality},on:{input:function(t){t.target.composing||(e.quality=t.target.value)}}}),n("br"),n("van-button",{attrs:{type:"primary",size:"small"},on:{click:e.toDownloadVideo}},[e._v("下载")]),n("br"),n("br"),n("img",{directives:[{name:"show",rawName:"v-show",value:e.gifImg,expression:"gifImg"}],ref:"img",attrs:{src:e.gifImg,alt:"预览"}}),n("br")],1)},b=[],x={data:function(){return{videoGif:"",quality:10,delay:200,width:0,height:0,videoUrl:"",gifImg:""}},methods:{play:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.videoGif=new h.a({workers:2,quality:+e.quality,workerScript:"./static/gifjs/gif.worker.js"}),n=e.$refs.video,r=document.createElement("canvas"),a=r.getContext("2d"),e.videoTimer=setInterval((function(){r.width=+e.width,r.height=+e.height,r.delay=+e.delay,r.getContext("2d").drawImage(n,0,0,r.width,r.height),e.loadImg({gif:e.videoGif,canvas:r,ctx:a,img:r.toDataURL("image/png")})}),+e.delay),e.videoGif.on("finished",(function(t){e.gifImg=URL.createObjectURL(t)}));case 6:case"end":return t.stop()}}),t)})))()},pause:function(){var e=this;clearInterval(this.videoTimer),setTimeout((function(){e.videoGif.render()}),20)},uploaderVideo:function(e){var t=this,n=e.target.files[0],r=URL.createObjectURL(n);this.videoUrl=r,setTimeout((function(){t.width=t.$refs.video.videoWidth/5,t.height=t.$refs.video.videoHeight/5}),1e3)},loadImg:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:config,t=e.gif,n=e.canvas,r=e.ctx,a=e.img;return new Promise((function(e){var i=new Image;i.src=a,r.fillRect(0,0,n.width,n.height),i.onload=function(a){r.drawImage(i,0,0,n.width,n.height),t.addFrame(n,{copy:!0,delay:n.delay}),e()}}))},toDownloadVideo:function(){if(!this.videoUrl)return Object(l["a"])("请先选择视频");if(!this.gifImg)return Object(l["a"])("请播放视频生成预览图");var e=document.createElement("a");e.setAttribute("download","img"),e.setAttribute("href",this.gifImg),e.click()}}},k=x,I=(n("8c0b"),Object(m["a"])(k,_,b,!1,null,null,null)),C=I.exports,T=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._v(" todo 分解gif修改指定帧内容 ")])},P=[],U=(n("b0c0"),n("ac1f"),n("466d"),n("5319"),n("1276"),n("5cc6"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("e5f9")),O={data:function(){return{gifUrl:"",gifName:""}},methods:{addGif:function(e){this.gifUrl=URL.createObjectURL(e.target.files[0]),this.gifName=e.target.files[0].name},dataURLtoFile:function(e,t){var n=e.split(","),r=n[0].match(/:(.*?);/)[1],a=atob(n[1]),i=a.length,o=new Uint8Array(i);while(i--)o[i]=a.charCodeAt(i);return new File([o],t,{type:r})},convertCanvasToImage:function(e,t){return this.dataURLtoFile(e.toDataURL("image/png"),t)},pre_load_gif:function(e){var t=this,n=document.createElement("img");n.setAttribute("rel:animated_src",URL.createObjectURL(e)),n.setAttribute("rel:auto_play","0");var r=new U["SuperGif"]({gif:n});r.load((function(){for(var n=[],a=1;a<=r.get_length();a++){r.move_to(a);var i=t.convertCanvasToImage(r.get_canvas(),e.name.replace(".gif","")+"-".concat(a));n.push({file_name:i.name,url:URL.createObjectURL(i),file:i})}t.img_list=n}))}}},R=O,A=Object(m["a"])(R,T,P,!1,null,null,null),E=A.exports;r["a"].use(l["a"]),r["a"].use(o["a"]);var S={name:"App",components:{ImgsToGif:w,VideoToGif:C,GifToImgs:E}},j=S,B=(n("034f"),Object(m["a"])(j,a,i,!1,null,null,null)),N=B.exports;r["a"].config.productionTip=!1,new r["a"]({render:function(e){return e(N)}}).$mount("#app")},"734e":function(e,t,n){},"85ec":function(e,t,n){},"8c0b":function(e,t,n){"use strict";var r=n("734e"),a=n.n(r);a.a},e5f9:function(e,t,n){var r,a,i;n("99af"),n("4160"),n("c975"),n("a15b"),n("d81d"),n("13d5"),n("fb6a"),n("a434"),n("d3b7"),n("25f0"),n("5cc6"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("159b");n("7037");(function(n,o){a=[],r=o,i="function"===typeof r?r.apply(t,a):r,void 0===i||(e.exports=i)})(0,(function(){var e=function(e){return e.reduce((function(e,t){return 2*e+t}),0)},t=function(e){for(var t=[],n=7;n>=0;n--)t.push(!!(e&1<<n));return t},n=function(e){this.data=e,this.len=this.data.length,this.pos=0,this.readByte=function(){if(this.pos>=this.data.length)throw new Error("Attempted to read past end of stream.");return e instanceof Uint8Array?e[this.pos++]:255&e.charCodeAt(this.pos++)},this.readBytes=function(e){for(var t=[],n=0;n<e;n++)t.push(this.readByte());return t},this.read=function(e){for(var t="",n=0;n<e;n++)t+=String.fromCharCode(this.readByte());return t},this.readUnsigned=function(){var e=this.readBytes(2);return(e[1]<<8)+e[0]}},r=function(e,t){var n,r,a=0,i=function(e){for(var n=0,r=0;r<e;r++)t.charCodeAt(a>>3)&1<<(7&a)&&(n|=1<<r),a++;return n},o=[],l=1<<e,u=l+1,s=e+1,c=[],d=function(){c=[],s=e+1;for(var t=0;t<l;t++)c[t]=[t];c[l]=[],c[u]=null};while(1)if(r=n,n=i(s),n!==l){if(n===u)break;if(n<c.length)r!==l&&c.push(c[r].concat(c[n][0]));else{if(n!==c.length)throw new Error("Invalid LZW code.");c.push(c[r].concat(c[r][0]))}o.push.apply(o,c[n]),c.length===1<<s&&s<12&&s++}else d();return o},a=function(n,a){a||(a={});var i=function(e){for(var t=[],r=0;r<e;r++)t.push(n.readBytes(3));return t},o=function(){var e,t;t="";do{e=n.readByte(),t+=n.read(e)}while(0!==e);return t},l=function(){var r={};if(r.sig=n.read(3),r.ver=n.read(3),"GIF"!==r.sig)throw new Error("Not a GIF file.");r.width=n.readUnsigned(),r.height=n.readUnsigned();var o=t(n.readByte());r.gctFlag=o.shift(),r.colorRes=e(o.splice(0,3)),r.sorted=o.shift(),r.gctSize=e(o.splice(0,3)),r.bgColor=n.readByte(),r.pixelAspectRatio=n.readByte(),r.gctFlag&&(r.gct=i(1<<r.gctSize+1)),a.hdr&&a.hdr(r)},u=function(r){var i=function(r){n.readByte();var i=t(n.readByte());r.reserved=i.splice(0,3),r.disposalMethod=e(i.splice(0,3)),r.userInput=i.shift(),r.transparencyGiven=i.shift(),r.delayTime=n.readUnsigned(),r.transparencyIndex=n.readByte(),r.terminator=n.readByte(),a.gce&&a.gce(r)},l=function(e){e.comment=o(),a.com&&a.com(e)},u=function(e){n.readByte();e.ptHeader=n.readBytes(12),e.ptData=o(),a.pte&&a.pte(e)},s=function(e){var t=function(e){n.readByte();e.unknown=n.readByte(),e.iterations=n.readUnsigned(),e.terminator=n.readByte(),a.app&&a.app.NETSCAPE&&a.app.NETSCAPE(e)},r=function(e){e.appData=o(),a.app&&a.app[e.identifier]&&a.app[e.identifier](e)};n.readByte();switch(e.identifier=n.read(8),e.authCode=n.read(3),e.identifier){case"NETSCAPE":t(e);break;default:r(e);break}},c=function(e){e.data=o(),a.unknown&&a.unknown(e)};switch(r.label=n.readByte(),r.label){case 249:r.extType="gce",i(r);break;case 254:r.extType="com",l(r);break;case 1:r.extType="pte",u(r);break;case 255:r.extType="app",s(r);break;default:r.extType="unknown",c(r);break}},s=function(l){var u=function(e,t){for(var n=new Array(e.length),r=e.length/t,a=function(r,a){var i=e.slice(a*t,(a+1)*t);n.splice.apply(n,[r*t,t].concat(i))},i=[0,4,2,1],o=[8,8,4,2],l=0,u=0;u<4;u++)for(var s=i[u];s<r;s+=o[u])a(s,l),l++;return n};l.leftPos=n.readUnsigned(),l.topPos=n.readUnsigned(),l.width=n.readUnsigned(),l.height=n.readUnsigned();var s=t(n.readByte());l.lctFlag=s.shift(),l.interlaced=s.shift(),l.sorted=s.shift(),l.reserved=s.splice(0,2),l.lctSize=e(s.splice(0,3)),l.lctFlag&&(l.lct=i(1<<l.lctSize+1)),l.lzwMinCodeSize=n.readByte();var c=o();l.pixels=r(l.lzwMinCodeSize,c),l.interlaced&&(l.pixels=u(l.pixels,l.width)),a.img&&a.img(l)},c=function e(){var t={};switch(t.sentinel=n.readByte(),String.fromCharCode(t.sentinel)){case"!":t.type="ext",u(t);break;case",":t.type="img",s(t);break;case";":t.type="eof",a.eof&&a.eof(t);break;default:throw new Error("Unknown block: 0x"+t.sentinel.toString(16))}"eof"!==t.type&&setTimeout(e,0)},d=function(){l(),setTimeout(c,0)};d()},i=function(e){var t,r,i={vp_l:0,vp_t:0,vp_w:null,vp_h:null,c_w:null,c_h:null};for(var o in e)i[o]=e[o];i.vp_w&&i.vp_h&&(i.is_vp=!0);var l=null,u=!1,s=null,c=null,d=null,f=null,p=null,h=null,g=null,v=!0,m=!0,y=!1,w=[],_=[],b=i.gif;"undefined"==typeof i.auto_play&&(i.auto_play=!b.getAttribute("rel:auto_play")||"1"==b.getAttribute("rel:auto_play"));var x,k,I,C,T=i.hasOwnProperty("on_end")?i.on_end:null,P=i.hasOwnProperty("loop_delay")?i.loop_delay:0,U=i.hasOwnProperty("loop_mode")?i.loop_mode:"auto",O=!i.hasOwnProperty("draw_while_loading")||i.draw_while_loading,R=!!O&&(!i.hasOwnProperty("show_progress_bar")||i.show_progress_bar),A=i.hasOwnProperty("progressbar_height")?i.progressbar_height:25,E=i.hasOwnProperty("progressbar_background_color")?i.progressbar_background_color:"rgba(255,255,255,0.4)",S=i.hasOwnProperty("progressbar_foreground_color")?i.progressbar_foreground_color:"rgba(255,0,22,.8)",j=function(){s=null,c=null,p=d,d=null,h=null},B=function(){try{a(t,J)}catch(e){G("parse")}},N=function(e,t){x.width=e*Z(),x.height=t*Z(),I.style.minWidth=e*Z()+"px",C.width=e,C.height=t,C.style.width=e+"px",C.style.height=t+"px",C.getContext("2d").setTransform(1,0,0,1,0,0)},D=function(e,t){_[e]?("undefined"!==typeof t.x&&(_[e].x=t.x),"undefined"!==typeof t.y&&(_[e].y=t.y)):_[e]=t},L=function(e,t,n){if(n&&R){var r,a,o,l,u=A;if(i.is_vp)y?(o=(i.vp_t+i.vp_h-u)/Z(),u/=Z(),r=i.vp_l/Z(),a=r+e/t*(i.vp_w/Z()),l=x.width/Z()):(o=i.vp_t+i.vp_h-u,u=u,r=i.vp_l,a=r+e/t*i.vp_w,l=x.width);else o=(x.height-u)/(y?Z():1),a=e/t*x.width/(y?Z():1),l=x.width/(y?Z():1),u/=y?Z():1;k.fillStyle=E,k.fillRect(a,o,l-a,u),k.fillStyle=S,k.fillRect(0,o,a,u)}},G=function(e){var t=function(){k.fillStyle="black",k.fillRect(0,0,i.c_w?i.c_w:r.width,i.c_h?i.c_h:r.height),k.strokeStyle="red",k.lineWidth=3,k.moveTo(0,0),k.lineTo(i.c_w?i.c_w:r.width,i.c_h?i.c_h:r.height),k.moveTo(0,i.c_h?i.c_h:r.height),k.lineTo(i.c_w?i.c_w:r.width,0),k.stroke()};l=e,r={width:b.width,height:b.height},w=[],t()},q=function(e){r=e,N(r.width,r.height)},z=function(e){F(),j(),s=e.transparencyGiven?e.transparencyIndex:null,c=e.delayTime,d=e.disposalMethod},F=function(){h&&(w.push({data:h.getImageData(0,0,r.width,r.height),delay:c}),_.push({x:0,y:0}))},M=function(e){h||(h=C.getContext("2d"));var t=w.length,n=e.lctFlag?e.lct:r.gct;t>0&&(3===p?null!==f?h.putImageData(w[f].data,0,0):h.clearRect(g.leftPos,g.topPos,g.width,g.height):f=t-1,2===p&&h.clearRect(g.leftPos,g.topPos,g.width,g.height));var a=h.getImageData(e.leftPos,e.topPos,e.width,e.height);e.pixels.forEach((function(e,t){e!==s&&(a.data[4*t+0]=n[e][0],a.data[4*t+1]=n[e][1],a.data[4*t+2]=n[e][2],a.data[4*t+3]=255)})),h.putImageData(a,e.leftPos,e.topPos),y||(k.scale(Z(),Z()),y=!0),O&&(k.drawImage(C,0,0),O=i.auto_play),g=e},$=function(){var e=-1,t=0,n=function(){var t=m?1:-1;return(e+t+w.length)%w.length},r=function(t){e+=t,o()},a=function(){var a=!1,i=function(){null!==T&&T(b),t++,!1!==U||t<0?o():(a=!1,v=!1)},o=function t(){if(a=v,a){r(1);var o=10*w[e].delay;o||(o=100);var l=n();0===l?(o+=P,setTimeout(i,o)):setTimeout(t,o)}};return function(){a||setTimeout(o,0)}}(),o=function(){var t;e=parseInt(e,10),e>w.length-1&&(e=0),e<0&&(e=0),t=_[e],C.getContext("2d").putImageData(w[e].data,t.x,t.y),k.globalCompositeOperation="copy",k.drawImage(C,0,0)},u=function(){v=!0,a()},s=function(){v=!1};return{init:function(){l||(i.c_w&&i.c_h||k.scale(Z(),Z()),i.auto_play?a():(e=0,o()))},step:a,play:u,pause:s,playing:v,move_relative:r,current_frame:function(){return e},length:function(){return w.length},move_to:function(t){e=t,o()}}}(),W=function(e){L(t.pos,t.data.length,e)},V=function(){},H=function(e,t){return function(n){e(n),W(t)}},J={hdr:H(q),gce:H(z),com:H(V),app:{NETSCAPE:H(V)},img:H(M,!0),eof:function(e){F(),W(!1),i.c_w&&i.c_h||(x.width=r.width*Z(),x.height=r.height*Z()),$.init(),u=!1,Q&&Q(b)}},X=function(){var e=b.parentNode,t=document.createElement("div");x=document.createElement("canvas"),k=x.getContext("2d"),I=document.createElement("div"),C=document.createElement("canvas"),t.width=x.width=b.width,t.height=x.height=b.height,I.style.minWidth=b.width+"px",t.className="jsgif",I.className="jsgif_toolbar",t.appendChild(x),t.appendChild(I),e.insertBefore(t,b),e.removeChild(b),i.c_w&&i.c_h&&N(i.c_w,i.c_h),K=!0},Z=function(){var e;return e=i.max_width&&r&&r.width>i.max_width?i.max_width/r.width:1,e},K=!1,Q=!1,Y=function(e){return!u&&(Q=e||!1,u=!0,w=[],j(),f=null,p=null,h=null,g=null,!0)};return{play:$.play,pause:$.pause,move_relative:$.move_relative,move_to:$.move_to,get_playing:function(){return v},get_canvas:function(){return x},get_canvas_scale:function(){return Z()},get_loading:function(){return u},get_auto_play:function(){return i.auto_play},get_length:function(){return $.length()},get_current_frame:function(){return $.current_frame()},load_url:function(e,r){if(Y(r)){var a=new XMLHttpRequest;a.open("GET",e,!0),"overrideMimeType"in a?a.overrideMimeType("text/plain; charset=x-user-defined"):"responseType"in a?a.responseType="arraybuffer":a.setRequestHeader("Accept-Charset","x-user-defined"),a.onloadstart=function(){K||X()},a.onload=function(e){200!=this.status&&G("xhr - response"),"response"in this||(this.response=new VBArray(this.responseText).toArray().map(String.fromCharCode).join(""));var r=this.response;r.toString().indexOf("ArrayBuffer")>0&&(r=new Uint8Array(r)),t=new n(r),setTimeout(B,0)},a.onprogress=function(e){e.lengthComputable&&L(e.loaded,e.total,!0)},a.onerror=function(){G("xhr")},a.send()}},load:function(e){this.load_url(b.getAttribute("rel:animated_src")||b.src,e)},load_raw:function(e,r){Y(r)&&(K||X(),t=new n(e),setTimeout(B,0))},set_frame_offset:D}};return i}))}});
//# sourceMappingURL=app.js.map